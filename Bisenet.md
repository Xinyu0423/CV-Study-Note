# Bisenet
1. https://zhuanlan.zhihu.com/p/141692672?utm_id=0

## 主要作用
1. 由于在语义分割任务中，需要对图片进行逐像素的分类，运算量很大，因此在引入BiSeNet，用轻量级模型兼顾实时性和精度性

## 当前主要的加速方法
1. 通过剪裁或 resize 来限定输入大小，以降低计算复杂度。尽管这种方法简单而有效，空间细节的损失还是让预测打了折扣，尤其是边界部分，导致度量和可视化的精度下降。
2. 通过减少网络通道(Channel)数量加快处理速度，尤其是在骨干模型的早期阶段，但是这会弱化空间信息。
3. 为追求极其紧凑的框架而丢弃模型的最后阶段（比如ENet）。该方法的缺点也很明显：由于 ENet 抛弃了最后阶段的下采样，模型的感受野不足以涵盖大物体，导致判别能力较差。

## Spatial Details和 Spatial Capacity
1. 上述的提速方法会丢失很多Spatial Details和Spatial Capacity，从而导致精度大幅下降。
   1. Spatial Detail: 指图片每个像素点的信息
   2. Spatial Capacity：指图片的抽象能力，比如在翻转，灰化，transform后，模型依然可以识别出物体的能力

## BiSeNet的特点
1. 加速的同时也重视空间信息
2. 带有小步长的空间路径来保留空间位置信息生成高分辨率的特征图；同时设计了一个带有快速下采样率(CNN,即Conv，bn，relu，pooling一系列操作)的语义路径来获取客观的感受野。在这两个模块之上引入一个新的特征融合模块将二者的特征图进行融合，实现速度和精度的平衡。

## 小步长
1. 即为在Bisenet的Spatial Path中，仅仅使用少量的卷积操作，用较浅的网络来保留丰富的空间信息，因此得到的图片往往分辨率较高。比如在一个100*100的图片中进行进行卷积操作，使用VGG模型得到的结果可能是一张1*1的图片，但因为BiSeNet中仅仅做了3次卷积操作，得到的图片依然是一张50*50的图片，从而保留了大量的分辨率特征和图片原油属性。

## Spatial Path
1. 具体来说，空间路径Spatial Path使用较多的 Channel、较浅的网络来保留丰富的空间信息生成高分辨率特征；

## Context Path
1. 上下文路径Context Path使用较少的 Channel、较深的网络快速（即卷积了更多次，因此最后的结果有更大的感受野，同时也更加抽象）downsample来获取充足的 Context。

## 感受野（Receptive Field）Receptive Field
1. 即图像能感知的范围，比如一张100*100的图像进行了多次卷积后，形成了一张4*4的图像，那在其中每一张1*1的图像里，它们的感受野都为原图的25*25，当继续进行卷积后变成1*1的图像时，感受野泽变为1*1的图像能mapping原图100*100的图像


## Padding（填充）和Stride（步幅）
1. Padding，即在当卷积核在进行卷积操作时，到达尽头后，无法进行卷积，则进行周围的补0操作
2. Stride，即当进行卷积操作时，通常卷积核在未指定的情况下，每次只会从左到右/从上到下走1格的距离，当制定stride后，如stride=2，则卷积核每次会走2步的距离

## Feature map和filter（卷积核）的区别
1. Feature map是卷积核在原图上进行卷积操作(即Conv，bn，relu，pooling一系列操作)后得到的结果，即feature map=原图*卷积核

## 融合模块
1. 在特征表示的层面上，两路网络的特征并不相同。因此不能简单地加权这些特征。由 Spatial Path 捕获的空间信息编码了绝大多数的丰富细节信息。而 Context Path 的输出特征主要编码语境信息。
2. Spatial Path 的输出特征是低层级的，Context Path 的输出特征是高层级的。因此，提出一个独特的特征融合模块以融合这些特征。为了空间路径和上下文路径更好的融合，提出了特征融合模块FFM还有注意力优化模块ARM。
   
## ARM
1. ARM使用在Context Path（上下文路径）中，用于优化每一阶段的特征，使用全局平均池化指导特征学习，计算成本可以忽略。ARM应用全局平均池化来获取全局语义信息然后计算一个attention vector来知到特征学习。这个结构能够精细画Context Path中各个阶段的结果。它可以不用上采样就集成全局语义信息，计算代价较小。
2. 比如在图2中，在context path内arm使用了16x down和32x down作为参数进行计算，计算方法为`16x down * arm1+ 32x down * arm2`，因此arm可以看作weight

## FFM
1. 在特征的不同层级给定的情况下，特征融合模块首先连接 Spatial Path 和 Context Path 的输出特征；接着，通过批归一化平衡特征的尺度(这句话没懂）。
2. 下一步，像 SENet 一样，把相连接的特征池化为一个特征向量，并计算一个权重向量。这一权重向量可以重新加权特征，起到特征选择和结合的作用。（这里没懂）将两个部分特征图通过concate方式叠加，然后使用类似SE模块的方式计算加权特征，起到特征选择和结合的作用。

## Paper的第一部分和第三部分

## GAP？

## 消融实验？